package test

import (
	"bytes"
	"encoding/hex"
	"fmt"
	"testing"

	"github.com/0xaf4/doged/chaincfg"
	"github.com/0xaf4/doged/txscript"
	"github.com/0xaf4/doged/wire"
	"github.com/ltcsuite/ltcd/ltcutil"
)

const Block_Test = "040162001797E873B4291F5EA63668E16D065123057142467E3735A58FBFD035245483E6F55C297283CEBDC4BE5DBB5EC1513D3A3189876AE5418BB5DB837BB508979232A533AB68159C001A0000000002000000010000000000000000000000000000000000000000000000000000000000000000FFFFFFFF5203621A2D04B433AB68537069646572506F6F6C2F332FFABE6D6DAE5CDD86A42247C4A2BC4E283110FE0378695A8300303C44395FCBD691A7FF2520000000922AF5072A1E6D47490252C91A2909001A290900FFFFFFFF02ADBD7B25000000001976A9142C722193763605768F8857E121E95197C18DA71488AC0000000000000000266A24AA21A9EDB4B6111A9A17412B93539114E6FD9A0FB9E08B54D723B3E83589C2BFD82A495D00000000000000000000006E34B3A01F9E4505CA05D5FF3F56811FB032C6C1417218543A0BE73EBB6A67C068A5109DECCECBC3E27BAEB67D938972744DBEDF6124CAAC5B81F226C26375DCC1BF54766C1E3373B16C123109F91460369F601C9A34C79C12DDC68AF5F3A65E6282859A54F39969EB931183B4E227F351436FB49E98C3D8B52AAD126B53BAD6D5F084F8454439DFC4C5DD5E6DCB2802BA2A4CCE9A66C8C82B5E159DFBD6F580CEBE98503DCA50BD0C6B9E61FA62A0FB427B2C9AD5D64F7F6FB180E992F8AEC325238655BC95F4DCF1B57EA7C2348F9D2A6505C7172951F9C42F147E632FACDAF954F9B2B7D84EFA1B9EC9D7A993D41CA5C4644DF31BC88188D8253EBAD3C378B8B17925536A0572CC033B67B0F544659F1E96B155A020553B3507CB59FDBA47B85DD8116D43F65D8ECC22004629F88844363621544AB945E57A0FDF8DBF0123717C4A17BD6D9812E6CF58054D96A8C5AF1EB0463570E1B1B19A45420E53E22377B89E752D51989520E2F88DDC134FE295E5547CED2DE94EC5C100000000050000000000000000000000000000000000000000000000000000000000000000E2F61C3F71D1DEFD3FA999DFA36953755C690689799962B48BEBD836974E8CF97D24DB2BFA41474BFB2F877D688FAC5FAA5E10A2808CF9DE307370B93352E548D5AC8D48B37DA393BE834A2A964582B0E85EC35859D012C8460F089688C1B827D3D831A67C3C373F403F89BB4035BCA99DEF5059A7816CA3A7354D44D1C6E5171A000000000000209CC3706E15F6235D1D26C4CF6F017F556ACB8133E3BAEEAF9543EB39961886504462729991C15FF498CC4257B3C9155A6FDAC167EDABFC4F722D2B15731F2E4DB433AB684F5A2C192C25581C2901000000010000000000000000000000000000000000000000000000000000000000000000FFFFFFFF0603C83B590102FFFFFFFF0166A13D40E90000001976A9147CB25E2C8E6274FC89FDE77F91D5BD701152794888AC0000000001000000023DC33905C41020EE3E76A4FABF6F1DA2825C75E1EBC1B227CE0D819CDFBA107D010000006B4830450221008D173171F975BACFA4737A93C804B0CB3CC205D8A4DD19D24F5DA9AA991C7FA002201A942DD20A7615C304FF264986C15D26F4030FE92402B24494109931E133DCAC0121028417BD7693F456059A845E5742160FCA571AE898460551952A739AA474CB80AEFFFFFFFFCDE2D9E22A2EA709925470C65746369BC1F8F673BF1762627C9CF134FDE0E951000000006A473044022053430825FC600495E633B059E4486DB2FD3BC4554FDD965BBA00B4DF165C6ADE0220037B88E8A69503A717ADE8056AD7D00669108E1820359DE535579860E92BF0210121028417BD7693F456059A845E5742160FCA571AE898460551952A739AA474CB80AEFFFFFFFF02E38B05BC600000001976A914E7923CFDD5B490A73D5CEB76021ACABA269E9DB288ACC046B89F140000001976A9149CE2B5AD251E6180F55C44FE3962A00910EC7EFD88AC000000000100000001553E22602694BC28590B3978CA80EA6DB701F6BB027C94A39BE09CB020685BB6040000006A473044022056BF94CDBBDB72C78663E1DA6CAD5645DA58BA194EF85006D03C0731A38BC72C02206139792AEB1D3DE41712507CD2F455CB9D4BE0A80CB6F162F3438FD8B61A1548012103A078DE061E2B15D3E4EA9E0AD5078B88170E426A47439864DD5981F19E3688E1FFFFFFFF0460F17BC1020000001976A914DA9010D6015D9C22229956D120E4716CB75D01EA88ACF2232603030000001976A914D282BB5898C1664FE58DD94F24A2B8B4D8423CD188AC68B22900050000001976A914F31AB4329E07CACBDB94FBDF375F19377A488DEC88AC3E126999B9ED01001976A914DE06D34DD890F874F687082B7DF5C24EF871DB8988AC000000000200000001AE5E6BC8BC33DAB27F080901456C891AD9137CF16915FE49C61D3EB5A182F989010000006A473044022046685DFFC2ADC1BECED44EFEF79A0E5268F0B6EA927AA106538AAC9FF297CAB7022072706CB3822A3345F396BA2F965948659E03361B2BD6D75FE4EA62C2315B51AB01210308ADA4FF67C25F87296D82F236DDEEB994F17CBB5428516E1B62A34078758B40FFFFFFFF0400F0638C0B0000001976A9147C8C7B500B5A6CAB002BCB4F3B01983C248942FA88ACB0C54B6A010000001976A91411EB1D3AE8CC137FD3DE88A950D17CF099267A4988AC60D16602010000001976A91447BA823563D48D4E091575C3A4165ADD9F22402288AC2704499EDBF100001976A9146100FF1D8C47CBAAE0FC96957AEA720568657BF188AC000000000100000001980D69A51B6941ABE1E628B499C0BD83156825FF3634D4A39EB0A56E24F487C1000000006A47304402207689E96A30A99A214EFDD273FE4F8A2833A5C8E2A254872D4810F9E766869A6302206DAA9C1EBF29B419ED6982F8E95E6FE2AE54555D77FEE79BA740C087B20072AC012103AEB0716234A1B1835927ED4699341C1D38E67176611FFFEA1EB5ECFD9381564200000000022F7999FA300E00001976A9148E3F03889B10E685B0DE872687E19BC2F7E2A8F488AC8ACC96A75A0000001976A914B6241DCE99C8A14F9892D19A485F95D25291661B88AC00000000020000000144135492275089561212B02F144BF436A79FADE5D88F2280EBB785D4EB7C9280040000006A47304402202EA859B5E61E3850D8FDF46079D6C6032BA1E4DC7C78032A655D266BEBBE7EB4022062F89CF60856CD6081D3BCDBF1BAE2BBCE9F3B65E8358DC1F7B4FEB0E3FB667E012102EEB1B59E6E60E0A9487FCE35C3A0E90C4DC6AFB31963B276F73F7316FB6A3CDCF2FFFFFF01C05F07C4190000001976A914E2D12BADF8FAF8401204D8E7ADF610423A42A01188AC0000000001000000010B729B57AC0863E3CD182D2CB94A586611E3369F69356140BF12EA8743683D25000000006B48304502210086537F1BAC5C2EA3CDD81C409F5554AB7A223F09EA5CF4378052B9C5F092FF430220151F9C20568B5981F84EC246B124532B9C8CAD5EB4E30A100C2BBC010A2B25E2012102A5539949A18083F416C3E46F196AD186828E4DC84826EEE90BDB23761942CC7E000000000158A82985000000001976A914217BA5B774B540FE0E7754F3E6C6C615B251E31688AC0000000001000000020A8972CA6EEDB5152AC63C6661D21DC832AB87987AF4019C39BA715ADD1A6E24000000006A473044022079E3DCCE0E2F63AB0D9F517E75255F7659642D290769882101265B48D3C76883022054892B6E079239C1213A5C36EFBCD7CBC233CF1DA1644FF7C2B24172080D6F5C01210210521D2E592A0759803319F1DA63A1335C519F3DF6A65BC127BB033613956C40FFFFFFFFC24A7B76B864782964E6D5BE6984BD4DC7E6AC01CA2E9A92EBD406EBEBA84879020000006B483045022100FA3EE12BB120C8874CF3860F80FB6FA6F0F9EC1777ABD65F891A825F1FC8C8ED02205BA2387E39B133C3027C8D4AE541BA4B4A819EA184A96978FBD0574EDD6487880121037742194D1C026CADE5A911B352263ABFACB0E22A5FA7B456231A70DB3B2D3A08FFFFFFFF02004C16792E0000001976A914C1628A0A869ADD24637EB64FFCD546ED0CAD4F2088AC1FFFDCAB050000001976A91428C992FDC5CFB956976170E823943AFA9F82767D88AC000000000100000001798CDD74C6B8872BD4DB3504832D07C590674817C257CE08DCEC78991787D2C3010000006B483045022100A40E9F82FF0168CBB3560EA6F9527C1793DD9DF1A64390EC094D0098856039B00220272267F4750F2B4772D1B2DD0CF85E9F4059FE5D7FDEB3DF80A49A1C105528CD012103984C6B5AB106D7BE68B1AB55A68B564873C54E7231C6AA7F3E838BE946C67D16FFFFFFFF028CE594C7000000001976A91494F39185C5E36FE75CCF0F6D83D2276D728EFE3D88ACF288E2E4FA0800001976A914BD762848C25B826582B1C107C550D249FFA8A66088AC000000000100000001A10D80B5F14ACF8E7BA09C408A1FC81FFB3DFC941F819482E48E1DCE81B1D641010000006A47304402204AE5D189B48C12916BAFBA18A3A03B707C67C7F498BAFB574E74FEDB4295C61902202E23DBF5EFE3634C27054860ACFAEBD50D657D78105375940CE5DDC79709B8DF0121023177F905B26EF9BABEDB4ADB62CCB0EB3CE3D1B8BECA8E730D1F6948B9C4B0A0FFFFFFFF02D2C8C2D00100000017A9146B479921A19F2492F73B5BB7A8618B588D6E1FBA87775778F5230100001976A914AE6F780B07B802F9809FC789FB4A6F6EB44DBF3188AC0000000001000000037A759DFB944825EBCEEA82CC593F87954AE4505733A36CCAB1CFB4407A0230CA000000006B483045022100F61654A62C1F3AA1A113A4BF959BD96A77EE053DE079DC849FCD6E4851B33B6602201F9387DDA33095DB1598B2F0D35727F12D6E13C1C788AA52C5BE6D0C2E584E910121036E9A23D7F34A14848A99174843CFD03C37D8EE8A76370888D7728C09C224863EFFFFFFFFC913E725D0F679A2419C664BFF57CB2326EA3F4C931AC3D73E54880238541000000000006A47304402205BE9F78BF0E5B413F761FE36B84F6569B17EF7C9363C33D3CB8DF3EAB1967EFE0220033DECAA7CBDA5CA73A6C0B23BE1748ACE64E4B55FCACE651115FF5D53BFD6D7012102C568D828A1743C3F2806CC78136BB3395E24371001359EFB11EFC4929C6E0D4DFFFFFFFFF985A1942531D7F90B147810C0D2E830B869164A715D5146E22E54EDFBB75557010000006A47304402201187CE4CBA52E06132C15989F01009C1B9F97EE16D609E149EF2FD77D9CA9CFE02200D6505DF04F8C33E1B8A0538B0A5D10CBAE90226B9DB0895F54D9360BFC2654B0121036E9A23D7F34A14848A99174843CFD03C37D8EE8A76370888D7728C09C224863EFFFFFFFF0296E9B1FD320000001976A914EAADE8D297DCD5AD5E92A60A600A648E40F84EC088AC39790980CE0200001976A91476721D20CD3D984C73A79C69957E55E6516597F788AC0000000001000000041B33F921BE428987BFEF66CDAA3CB80DD829AE15A5CF4EECB06D467ABB2B4D8B040000006B483045022100E9A489C851F5B7540FE6AAE038494109AEC2F3949F22B1619EF7F1BE9BCCE89502203B7EF0CF317A071DA61E540563812E0C2BDA7CDC12F9D9BDF5A93A8D81F7738B012103E2E12168669EFC3C71918EDD216DAE1F1D190658C1097FE6BB33BFC3C1EDADBBFEFFFFFF59092991C7A0908D9B990DB725D8F79329E6D75C72644EC466CAD27CA032F9AD040000006B483045022100EF20F0676D7B87D3EFA03B0D6113E797EEB35CED14E3A0F8A8CEFD1F01FD984302202A9095FB64091C3D58911106B4A78E8C10B804DE0D6F6060F51AA9BA7BD5FE1301210277FF99A2BB747CA9E89650B49FCE26347FE07CB709CE9E41AD8BB64ABEA79DFAFEFFFFFF071774D094BEA6775C2D968840BE7A0FDA0A551CAC8DA591D0095F82B3E7A844010000006A47304402206B29B162465C458631277E64B409C2750B86E6A7968B560D9EB4AA449B197CA80220652DD4AE4AED6295D6AF9E64F05F40CA168593430D563A90276248BA4EC2AE17012103B29DDE3CCDD543B5C9C6AF7FF38A29953BC7C103A11DADF6EE5FBE2AE730050CFEFFFFFF8D2B8F4D27DA6CCF14F39D0881F876A4C77BB8FEC75717703B63D0CB3C81ACB1010000006B483045022100927D4454A22E620C6B870048B4D47A3A4ECD57E4654B511425A69BE793AB723302207827AB6E191B60DA94588F604D9C8CEDB7C50C5C947DF3FD0E6B7CD28DBB75AF012103DE09DB65F82F301203D5AED16AE58FDE5D0417D772EDA4AE7864868C62FB6E4CFEFFFFFF024872B371120000001976A91499C4F6D0CA8B8EB8D559F345AD4D070FA5106E7588AC9348F05C000000001976A914B435039FD19CC6F03A4AD595A1FB4D77BF8A596E88ACC73B59000100000001B8CF04FFB908C657BD49031131D0271CDF9D387F8874D1CFCED37F5CC87C18DA000000006B483045022100CDEFA377BDF380C531F7EDF983BB2FA5C8763993113EF0424B500E63447E3FF802207BDF5E1DD46BCE7E1A6FEEA8D6F7C65ECE672971EDB743A32ED24CECFE1FDEBA012103228821C04D0DE58AB319B5150C18E72EF8596BC29F799065FFB2E85A443419FEFFFFFFFF05C0B1F713000000001976A91430D9AEDAC9E45139A7022E7E9555D38D7CA8AE5D88AC40AE3C28020000001976A9149F1634CF17BC671F1C4BD7C2F2CEB6C24876547488AC102BD222070000001976A91482D1D24625DCA82047C45D989DAD2C700236557E88AC5F3697B93F0000001976A914095D67C5C6948293AE1ECB24FF37A0397E5910CA88AC337817EAD60000001976A9143B112C9C5A56E6A1DB2EA33B1879C005556FFE8E88AC0000000001000000010ED3D8BE9BA780B6D9D6F00F7D9587AB5524DDABC62A81CFBEB90FC20572A633000000006A47304402200A5FC8CD8AF4EDCB1E7E3326C8AFC6D9DBD4E7D63FC62F37C104C40FF2ECE2570220459E40F854425CA9AD87547F50B11262377690D1285ADC8AC7746E001BE0FB58012103F9132954E11E7EB1E2B79DABEA75708329623D347335FC698B21275A633343A1FFFFFFFF026DF75DAD030100001976A914F7A0D0474D3B835B2625364954882BCCB4E9F33A88ACF906FCF4AC0200001976A9140BE4C25349EE33A3F3D9674FDD31618918CACD4588AC0000000002000000075103F5B7D21439E1AD4406A77EB935B0BF7404F35C4F4FFB8D0EEFF098A3B00F000000006B48304502210093EB704E3732867F5A59D05B676706473AF774C5A2A82847F49A45E9359C99A0022002EACAD2B7ED619BC34821F46D63EADED5D2C18C30A768D8AA4483D37F0FE19E0121031F6FDA1EA89F8C71B82917DA26C87772BE37F605944305057CB59D20294A23B3FFFFFFFF5103F5B7D21439E1AD4406A77EB935B0BF7404F35C4F4FFB8D0EEFF098A3B00F040000006B483045022100CE85C0C17A476FADF02F98934FEF2411601F2EB65C19E7279D486950D7DF6FAF02207E97A8B58C8DC83C25729197D083A9D54C4439B1724B37DD156509A91D972BBC0121031F6FDA1EA89F8C71B82917DA26C87772BE37F605944305057CB59D20294A23B3FFFFFFFF611CF3F27200E50C21E1A143AB29ADFE44ABA8EE7645FB61EA1A6967D068E731000000006B483045022100BE7A296C3DD41B68D6558ABF166BA742EB6D15F6FAE1B05E91BD94D6AD4FC433022069578A89F9A3BE9081F5E89830B587B1C123EA3892C7B1006CC2254B916A585083210347A1C35B945C27DC6DCB22D3C21D786053CD36DB157738B0CC3C5CC210F139FEFFFFFFFF3B7FB50F5E7136801B2030C2D8F4BE569D11F9F72357D21C1B6C6CFA0D591152000000006A47304402205E2BA2C20C73B56ADF0706CD1B012CD8E8572991CCB7F8C4328E28C5DB725E250220449283AF9E5B7AD80033D0E46D6B4C60C0B09C946F974BCDDBD73B226A75602F0121031F6FDA1EA89F8C71B82917DA26C87772BE37F605944305057CB59D20294A23B3FFFFFFFFFEE9EF34E51A0BF36996FDEFE7C8B3836C07ADDDD0DA0B64504243FE3727C250010000006B483045022100B76602A3A7F879F2028C73F0FA2E8325AF699D13766E325D646C1E06ABD96593022031D8209EBAB4192CF3A900A99CB720AEF19A0469CA5DE692833DC4E6026503C30121031F6FDA1EA89F8C71B82917DA26C87772BE37F605944305057CB59D20294A23B3FFFFFFFF498FD3780DF86CD9081DCF3BC9CB87B16B671A3A498895F86E2744C139E6BA8D020000006A473044022018722C39E36BCA9EE7ACCE06B9BDA50EF95CF338F80957A5B218998B446B84D102207F2EDAC2132416FBE75826B0592F6CE975C557503F2FC0FDBD023E90B92F6C940121031F6FDA1EA89F8C71B82917DA26C87772BE37F605944305057CB59D20294A23B3FFFFFFFF4109D92562DA35874FF54B2082FD903FF0AEA11CE8E02C8A3E1297A4642CD368010000006A473044022069D587E2E51A9C99BAD1D362D178A1516A1BE19DD917648C4D57E529AD94EB880220408BDA2FD7AB85AAE15BE0F34280D1E73D1977230D7596543F67864F76063BD50121031F6FDA1EA89F8C71B82917DA26C87772BE37F605944305057CB59D20294A23B3FFFFFFFF0667AE0A00000000001976A914B52AAA59710827E5D6D7176398EB94106B3755CB88ACA0860100000000001976A914B52AAA59710827E5D6D7176398EB94106B3755CB88AC00ECE4FF010000001976A9145F7A47F25979F7A30F0E683C158E6602421EED7988AC60F8CD15000000001976A914943CBD49A2113063807F59DF5D0F52794533CEAB88ACA1860100000000001976A914B52AAA59710827E5D6D7176398EB94106B3755CB88AC68F66400000000001976A914B52AAA59710827E5D6D7176398EB94106B3755CB88AC0000000001000000014563D22D88DF1E73AA1F70320610BE27B5AE8F7D9D01101682963CA6063C58790000000069463043021F6675C7179942B2D1F48482E87FB122D260B3863B44A3FEB7FE5099D3C2A85E022058C8A91BC1116D980F2DAB46B2B7028DE97A29BBB48A6B3A44F626ED0D5438C901210286FBE0620BE516B92DFA0CB4C1C83DBFF88899C5B72BDE1834E178B47855A093F0FFFFFF0135D3DC86170000001976A9140DF62BCA7F2736F07146A9A586BCEF06E6DA44AA88AC000000000100000001393C0C8D312AC00B68634BE2E604C309DE683E0532B2D605A33B36CEE2DEB667000000006A473044022013EC76D616B8FFEFD1693E6D51F8EB187670D40B55C1D2A5C40CE7EFD69B019002207CAFF42107C6659D0512555E3ABCE299FFBC009DF82A186E47C0ED23BF1F1ED1012103501EA894D7230EBED2E9A857AFB931EA592BFBCA493776A9FED3814A7D60D72CFFFFFFFF0103ABA701030000001976A9144B979D1764275A16BB32DAD6CE0D9E95D5921BDB88AC0000000001000000016A251F5D3DEFBE23B490171822EB3A6BB506E74674453E15700FC5D2714D47AF010000006B483045022100AD5898D386715A546CED7A4F80CA79FF81A50D980ADB889E1BAA94B3C7BEA41B02200A169293D1DE6AD7D228BF0DEB663663E4B6F0E63C226CBF2C78E3D1A25FFD9E01210328A115927557B4DD813D592304A21A9557323C149D814CB5B847E2D5F1B075D3FFFFFFFF0200C817A80400000017A914AE6E7E54E461A0B78BA2B5C998F98C91FAE39F8387316A9F17DF0000001976A914F29C004F65DBE4FF696B86BDA93389167DA57B4C88AC0000000001000000039C69E3350865A6CC8380DCE8AC43C290FD3968659E43BDD82B94860A6385FD001B0000006A4730440220092F5589B4C0B051C8162E4256B1ABB3F6EA20E112CAFF2856150924E4AD825402203FBDC3EC2CB76A2E77B11CEDF056EFAB47D05B9FF02F1EC8BA8A8DE0BE5B3F550121023DA8EAF8B5B45162B55F9DF2A931A46613898AA6CB68D1427BEFB78E6E002A0FFFFFFFFFA9DEEB30FDE0E6510068C98B6EECFBEE752312BAD69F4B1517AE7A28105C7B19000000006A473044022021C04A8B5E556A821C56AD0C20BA09A85C47F367E9D5CE53C59D372B0A58A8550220658521C0EA309660F699DEA97B6931CEE78FDC497AE13AA5FEFBF8C73FD8ACD8012102F240049660BC0FE947CCB88296739BCF9CA200071EA4D025FD6E6F565F4C1C83FFFFFFFF3F2A78E6BA43B956713AD4E9CD2C3803D61EEF77CB7FF97E7D2CFA1A87AD8706010000006A473044022070B15A851B537E12C6A7F348E4FBDBAE179080CB637A387A7030ECCD2A90B156022073921BB8661B85994BAE310264BBC9F5FA992A19C91294A9685A62E6DA50E4EE012102F240049660BC0FE947CCB88296739BCF9CA200071EA4D025FD6E6F565F4C1C83FFFFFFFF02DC6F1B3C010000001976A914CE9514F7DBE3638B148AA73EF49F6D8F56C5A93B88AC8E67CBCC000000001976A91474A933A959B18AE1A8E5CF511E61A40EC418BB4188AC00000000020000000133CD1920E92680F230246C979DC4F3DAE7CBE4ED084BC62738BCD54A2CE32BAE060000006B483045022100B4729B6B6669711DC47E0653A99DF91966310D631923EF514B952B04DFEC0AF602202E3FC5B93CA3A14E3C89620E9784BF2FFDC81FC25F2E20D78407C0DBF3EC1BA4012103A95F04408CBBF30AE9657FC66CF3434C6072ACD5B99C617F3132AF41A87738EBFFFFFFFF06401E1500000000001976A914E85F0153F76F97DBA54703CDA839D1B9951677DA88AC401E1500000000001976A914E686201CF97A43A613F2D127506854F3E0CC247088AC401E1500000000001976A914AA0364C15D95DF79EC4E743E7737D65223DBB7D688AC401E1500000000001976A9143B112A12B0AB4A8B3B0B76337050E14044F55BA688AC401E1500000000001976A9147F087036C5259D248E6443BB457FCAFC61C7E13388AC81ED6F23970000001976A914EC56AF1207751B64C6A7C936D904A5ADA1777C3D88AC000000000100000001AEFA23DBB83BF0CB1E058A3FBAB0B18276BBBE45E989C752357F41F1EE9CA3A5010000006B483045022100FD3A20C67E8FF533C9C6C4EE27B0A936E3270BA2BE098A66B92B08A005FD614902201F899D2464C436E31C5516CDF0095B23470CECB5C26D348F7F8FE71CF04857F301210265A3C00A588C899676681E166C916ED030385C9DA5A4C8D4B9029EED88A56D44FFFFFFFF0208FF83DE010000001976A9141D2494CC6ED67EB337A871497B81A9B5BFC26ED088AC2809017C220000001976A9140BE4C25349EE33A3F3D9674FDD31618918CACD4588AC0000000001000000019E29A9B6762812D408C100CD9128E67E19D84AD9C71AAD623654DFB55CA640760100000091036F7264510A746578742F706C61696E000F353834383030392E646F67656D6170473044022018E9BA84BFA47458D87A6F214C48B3DCA38EC91F5452F204E70521AF547C6B1B022029C652EE42CB6D97D131E005B07A622B6EEEA9924A4B60096686F77EE7599DA301272102D9E159E64BA1246588A6CAA9BD8F5738B39EA33FD1B906EDE1DFFDC9C298F505AD756D6D51FFFFFFFF02A08601000000000017A9144576B49744D8AC244249966F0997914E269B0D2D87600B73CF1000000017A914A08DB4DD422AAC4C3AE5A13A8F0106C497C18625870000000001000000017F2921B4794667FE763016249A1BEE969CE1C0B27B59B157036CCD856D5F1864010000006A473044022037CD90583AB47C119346D741ADC7026DDD823360AC62EEB09602B10DE39172C7022044FF9C525376BB9B94CBB66035B721105834CC23125B22539319769EDD8B21F701210265A3C00A588C899676681E166C916ED030385C9DA5A4C8D4B9029EED88A56D44FFFFFFFF02EA76E304010000001976A914189E421183B35FB7FF83E19C414CDC2D7F38464588AC9541ECA7020000001976A9140BE4C25349EE33A3F3D9674FDD31618918CACD4588AC0000000001000000019B684349D4C67B5CF70950812B1D22C0693DBD5748301974898AF550BD1B8486010000006A47304402201EDDF42DA23F4ABF5745BB4E4F894FCE58DEE3905C53DB3FB0C81A45AF3F53F7022003B0C184165B701FC768D64DA595E1D24307249DE6EDFBB79E685466109F3B1301210265A3C00A588C899676681E166C916ED030385C9DA5A4C8D4B9029EED88A56D44FFFFFFFF020E0B4128000000001976A914BC1EA1578F576FEB180EC6B708D310D3EF325D2488ACEC78EA26010000001976A9140BE4C25349EE33A3F3D9674FDD31618918CACD4588AC0000000002000000011C4FC41F60A3BA4FDACA5097B6AB1FF95ACF11D339FAD06FD72D51F7CFFD5C09000000006B483045022100D457E15952F58192A6C9EB9A5DCC07655280960D4315B1E223DF96BEEB0D3D12022066BC3DB0C88783FE1967291C81E294C84F7B96781CCEAEF656B9F9D6FAEF0E7B012103A17EBFDE210A3C35D91631D9BF5891FDAC91E288FF047E3C7773CD958E9D1899FDFFFFFF01E0F920000000000017A914636D68EE4D8B7D7CBF8F67137C7CDB1D6F56689C87000000000100000001811669443C56DA57AF3D1A166375AB310C399A584C8D0278DA4CBEF0C3035AB94600000032036F7264510A746578742F706C61696E000F353834383030382E646F67656D6170106D6D750A6A6572627A326C756566755DFFFFFFFF01A08601000000000017A9141AF89163BB315545982BAF0C947EF64CE526EE9E8700000000020000000133CD1920E92680F230246C979DC4F3DAE7CBE4ED084BC62738BCD54A2CE32BAE050000006A47304402204670105B253E051A2C8DAD3A704840697910A1FE3CB7858D956B11E3DFFD92EC0220419CCC6EDE2759FAAF85925DDDB7386648B57F9B144D8157FA29FB72FF503E320121024CA58320F64754AD732779C1BFE899180FDBBC28305E834938CB98FD67A64572FFFFFFFF0140420F00000000001976A914F7A6A0EA14CE0BBEDC169978A091A814D1141C7888AC000000000200000001B95F7DF90C2B7F12A9C165B181373A20FD7FB94661015E6DA208E7119C462837000000006A473044022073F5DDA143EB1454DE43B7E98C5489E0A19711957AE782F345DD48EA2271D9130220429EF58C203F742BCCD0F8AAF13FF5078D5995CC8F4487A61DC0CEDF69147F6C012102969D07AE1E1847F55030688C6EE6A0CA4296178A8575E49C3A312BA7077D51ABFFFFFFFF0140420F00000000001976A914DB1507F447D80579BBC419E7685D2F74802E13E088AC000000000200000001B95F7DF90C2B7F12A9C165B181373A20FD7FB94661015E6DA208E7119C462837010000006A47304402201B104D0A13FA7D2B9ECF903390ADFADCF1938304B2BBC3EC72B2C24DE93C4FBD02204F546BDF6FAD09574D06E4D71AC41BF0CB218C7CA334CF688BE27C342E0E3D5F0121030B99C1C08A5056589E52935CE0FD71656699C39112F4CADBDFF3948C15DD60F0FFFFFFFF0140420F00000000001976A914E7138D0B6D0C1968AADE4556971B5B3975693E4088AC00000000020000000133CD1920E92680F230246C979DC4F3DAE7CBE4ED084BC62738BCD54A2CE32BAE040000006A47304402202AA2DB7CA60C9A2411ED5630596B7583985B9D8AE4C93EC30FD892A62FA706820220794265CA35CADB12AF265B3200B3DA8E3DAE853DCE2A6319D4DA740F9AAD79F9012103951CA0F496B6F0C37C84B8180646DA4ECBD8E86B40F61B9E040B78D2BF48FE09FFFFFFFF0140420F00000000001976A914B7B156146AE193EEC507FCA17AA5607C5C13F7CA88AC00000000020000000133CD1920E92680F230246C979DC4F3DAE7CBE4ED084BC62738BCD54A2CE32BAE020000006A47304402205CF1295C34A28FBDFA1EFEAFC7F2E358F712BD9985EE172FDE5181ACA889272402204238B9A884DD8A1B6B486064E5B34CB32C8E9EC3AB629104338F4FBACE6683F001210292A0F4A4D6873D30EE6CEB040931320566ED16AE3CD7126FB712976B17263BDDFFFFFFFF0140420F00000000001976A914485CAFFD575673C86C4FE8CB7D0CC84E749B6ADB88AC000000000200000001B95F7DF90C2B7F12A9C165B181373A20FD7FB94661015E6DA208E7119C462837060000006A47304402206AD2B48783B66EB381F04B0ABE608CE1AB0E31DC0685F67E74B4E9C2017E162E0220340D09DF6EA0064CEB24133E10DDE5A1215C9B7A2883A17D14B8F5D57C76BB01012103698F77576A3ADDD96996C574F0561D1E53B47A85594C8DD50B7685487E7404F2FFFFFFFF0140420F00000000001976A9141EFA64EF781EC55332C4AA2C444983A4584B1E9988AC000000000200000001B95F7DF90C2B7F12A9C165B181373A20FD7FB94661015E6DA208E7119C462837030000006A4730440220599C11B67E962AC6845EE53A3B80470E76932428D41CE792AAFC85C0ABF3447A0220220C63FCDB8A8813CD83CCA36989C85535F8614A4216978FA94CA061EAE0879F0121029EB2DDEBF7881A57EBD1D2B643DCE7F51A04F075ADA6961C75E95F8FEE71C489FFFFFFFF0140420F00000000001976A914FB004C31658AAB6D5D2703D9AE93A1496C38202988AC00000000020000000133CD1920E92680F230246C979DC4F3DAE7CBE4ED084BC62738BCD54A2CE32BAE030000006A47304402205EF299B016A911E9976C690069120709F1F8B46B637A3EB31AE166D72EFA2B6E022002FFAB3853C790E4CA36FE688F9E27EB27F713D5CC7E67583D96D171ED4950D80121024DB672E56B006527A534C6563D29EAEAC6615CFF0680244182BDC7F62787626AFFFFFFFF0140420F00000000001976A914D81A9031D0FD86834F834163CED9B9ACC9751C0088AC00000000020000000133CD1920E92680F230246C979DC4F3DAE7CBE4ED084BC62738BCD54A2CE32BAE000000006A473044022047673EC3FD1A074AA13779A473BE39D0F4FC4A073933DB5298F3C9B06FE53F070220228C752AD2589016FBDA3992522B31AE5218D58E2754FE4894B249493210ED46012102465302A8A84FA0292D9EE786B81039C68F1DF176C472F66C758FD7F8F536C85AFFFFFFFF0240420F00000000001976A9144618A337BBF1D34A6EA37379B0F00C6FAD244C7B88AC40420F00000000001976A9140D4C3A0BFBBC3198C93EE70C0FE131FF738B981688AC000000000200000001B95F7DF90C2B7F12A9C165B181373A20FD7FB94661015E6DA208E7119C462837020000006B483045022100F5A3C24A7CBCE4CAAFE72E5F57A66BFB6EA66C29E47DA28C4FEE8695065C359A0220742C9D0443C9697760021F077028016E9B81FEBBEC194C9D454DA9D0A768FDB00121034BE42F790196570DA189E93F8F773B8AC8B05EDA6C501BC18E1337BA08AAB4EBFFFFFFFF0140420F00000000001976A914B4F367136615A847BF301EC9C4E88610B8C9D52B88AC00000000020000000133CD1920E92680F230246C979DC4F3DAE7CBE4ED084BC62738BCD54A2CE32BAE010000006B483045022100E4ABE8988E3D44E28E0ACF2D2DC4CD0F0829E14799FB6880181F45236D2638330220331440970EC7704AE0F91F705BC60A751825A801C29FB64C6895C7A8DC31A2AA012102D477EB182B8F92C462E4D7D56F8166F8E321BBBA1306FEC83292B39304D13D3BFFFFFFFF0140420F00000000001976A91431A36242FF9CF1A2659501E613DA09518C3471DD88AC000000000200000001B95F7DF90C2B7F12A9C165B181373A20FD7FB94661015E6DA208E7119C462837040000006B483045022100AF42D6EB963EBBB63EACA20FEE4BDE41112D3708A3320040CB9B716438ADF4DA02200E388F1E60C62631B65BF1949D40C348351E6711386A30BB9A9E1DEEAB77A3CC012103F59E8B9179E22A1BB696AB03B5BB3E7AC1207E8BBF16D80E214457E9172A7F5DFFFFFFFF0140420F00000000001976A914403322A932DF6D5EF25E086BE58E6EA8F652C05188AC000000000200000001B95F7DF90C2B7F12A9C165B181373A20FD7FB94661015E6DA208E7119C462837070000006B4830450221009D97531D786F67E0E1C830FE2E40C369A653ABFCCE0ADD2298C097529E17C40B02202D36F59948DC4668B00BD0656083F1A6917D75C371EAFE30E69942F59D39E4F10121035A32A0BBBCD5FDE4F6226AED2BD5DA5D28D53A4752DED4E49F1ABED93394F6E3FFFFFFFF0140420F00000000001976A914032C8A5592FDFEFB2D0C731A060A4699647B2CB588AC000000000200000001B95F7DF90C2B7F12A9C165B181373A20FD7FB94661015E6DA208E7119C462837050000006B483045022100F6C99277CBE6ADF4734DDEA226873D2AE14BBD258FE8F102853DE7B78BA63A42022016F229DE62BEE1E9009FAD704E37A7B9485572CDCEB9F3F61182914EAE1DDB8E012102E8D514ADADF18EAEFC3F0D96A56B0D759D0961D5498B192216A456ABD031A72EFFFFFFFF0140420F00000000001976A91467050012495663B41528FE8C0883291C0CA4B84D88AC00000000010000000112CE4A9FCB2AC74D063B2E2E11109DDE5E29C61CE68585A2DB54118639E0AA6B000000006B483045022100E0D90B2C67217B82102905C5EC2A7B1166474C5E3A14A4C89FEA7E7C9BEAECCD022001D7955934486F4DC49EA25F72A8714D42408DC073D8053CB304A4A5FFCDB8B8012102FFBF8377A2A064A359DB423B176B459F177A9EECE23D425719612AB1E79B2B98FEFFFFFF0580841E00000000001976A9148477CBEF1CD9E18A89569778CA6784707382858388AC80841E00000000001976A914F235D830826647DAD59452F905043C508003F1BC88ACC0E1E400000000001976A91464934398C0EAE19D17B9304C37F97B472B2232C288AC0076E431000000001976A914E6D8F34F1A9CD25784A6A8FC1351288AEC80144688AC80841E00000000001976A9141C0E871F4F4AE47C1AD39266836F6A84C9E511D488ACC73B5900"

func hx2b(str string) (bytes []byte) {
	bytes, err := hex.DecodeString(str)
	if err != nil {
		panic("WIF: bad fixture: " + str)
	}
	return
}

func convertAddress(PkScript []byte) string {
	_, addresses, _, err := txscript.ExtractPkScriptAddrs(PkScript, &chaincfg.MainNetParams)
	if err != nil {
		return err.Error()
	}
	if len(addresses) == 0 {
		return "no address found"
	}
	return addresses[0].String()
}

func TestBlock(t *testing.T) {
	data := hx2b(Block_Test)

	block := &wire.MsgBlock{}
	err := block.BtcDecode(bytes.NewReader(data), wire.ProtocolVersion, wire.BaseEncoding)
	if err != nil {
		t.Fatal(err)
	}

	fmt.Println("block version:", block.Header.Version)
	fmt.Println("block prev hash:", block.Header.PrevBlock.String())
	fmt.Println("block MerkleRoot:", block.Header.MerkleRoot)
	fmt.Println("block Timestamp:", block.Header.Timestamp)
	fmt.Println("block Bits:", block.Header.Bits)
	fmt.Println("block Nonce:", block.Header.Nonce)
	fmt.Println("=====")
	fmt.Println("block hash:", block.BlockHash().String())
	fmt.Println("tx count:", len(block.Transactions))
	for i, tx := range block.Transactions {
		fmt.Printf(" tx %d hash: %s\n", i, tx.TxID)
		for j, txOut := range tx.TxOut {
			fmt.Printf("  txOut %d: Script %s:%.8f\n", j, convertAddress(txOut.PkScript), ltcutil.Amount(txOut.Value).ToBTC())
		}
	}
	fmt.Println("=====")
	fmt.Println("")
	fmt.Println("")
	t.Fatal("Уронил тест специально")
}
